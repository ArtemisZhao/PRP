setwd("~/Desktop/rep_new/PRP/R")
setwd("~/Desktop/rep_new/PRP")
devtools::document()
devtools::document()
devtools::install()
library(PRP)
remove.packages("PRP")
devtools::document()
devtools::document()
devtools::document()
pi
pnorm(0)
pnorm(1.96)
c= sqrt(2/pi)
rprob<-function(t){
pnorm(sqrt((1-r)/r*t)) * e^(-t^2/2)
}
integrate(rprob, 0, Inf)
c= sqrt(2/pi)
r=1e-5
rprob<-function(t){
pnorm(sqrt((1-r)/r*t)) * e^(-t^2/2)
}
integrate(rprob, 0, Inf)
r=1e-5
rprob<-function(t){
pnorm(sqrt((1-r)/r*t)) * exp(-t^2/2)
}
integrate(rprob, 0, Inf)
c= sqrt(2/pi)
r=1e-5
rprob<-function(t){
pnorm(sqrt((1-r)/r*t)) * exp(-t^2/2)
}
c*integrate(rprob, 0, Inf)
c*integrate(rprob, 0, Inf)$value
c= sqrt(2/pi)
r=1e-5
rprob<-function(t){
pnorm(sqrt((1-r)/r*t)) * exp(-t^2/2)
}
c*integrate(rprob, 0, Inf)$value
c*integrate(rprob, 0, Inf,rel.tol = 1e-100)$value
1e-100
c*integrate(rprob, 0, Inf,subdivisions = 1000L)$value
c*integrate(rprob, 0, Inf,rel.tol = .Machine$double.eps)$value
c*integrate(rprob, 0, Inf,rel.tol = .Machine$double.eps^0.5)$value
c*integrate(rprob, 0, Inf,rel.tol = .Machine$double.eps^0.75)$value
c*integrate(rprob, 0, Inf,rel.tol = .Machine$double.eps^0.8)$value
c*integrate(rprob, 0, Inf,rel.tol = .Machine$double.eps^0.1)$value
c*integrate(rprob, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value
c= sqrt(2/pi)
r=1e-5
rprob<-function(t){
pnorm(sqrt((1-r)/r*t)) * exp(-t^2/2)
}
c*integrate(rprob, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value
c
integrate(rprob, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value
1.25*0.79
integrate(rprob, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value
c*t
t<-integrate(rprob, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value
c*t
###r_vec and probability 1-1 transformation
c= round(sqrt(2/pi),2)
c
c*t
###r_vec and probability 1-1 transformation
c= round(sqrt(2/pi),4)
c
c*t
t<-round(integrate(rprob, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,4)
c*t
t
1.25*0.79
t<-round(integrate(rprob, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,2)
c*t
c*t
###r_vec and probability 1-1 transformation
c= sqrt(2/pi)
c*t
t
t<-round(integrate(rprob, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,1)
t
t<-round(integrate(rprob, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,2)
c*t
t<-round(integrate(rprob, 0, Inf,abs.tol = 0)$value,2)
t
t<-round(integrate(rprob, 0, Inf,abs.tol = 0)$value,3)
t
c= sqrt(2/pi)
r=6e-3
rprob<-function(t){
pnorm(sqrt((1-r)/r*t)) * exp(-t^2/2)
}
t<-round(integrate(rprob, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,2)
c*t
t
t<-round(integrate(rprob, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,3)
t
t<-round(integrate(rprob, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,4)
t
t=c*t
t
t^2+(1-t)^2
c= sqrt(2/pi)
r=6e-3
rprob<-function(t){
pnorm(sqrt((1-r)/r*t)) * exp(-t^2/2)
}
t<-round(integrate(rprob, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,4)
c*t
c*t*c*t+(1-c*t)*(1-c*t)
c= sqrt(2/pi)
#r=6e-3
rprob<-function(t){
pnorm(sqrt((1-r)/r*t)) * exp(-t^2/2)
}
target<-function(r){
t<-round(integrate(rprob, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,4)
res=(c*t)^2+(1-c*t)^2
return(res)
}
#mixture_CDF_left<-Vectorize(function(t) wts%*%pnorm(t,mean=mean,sd=sqrt(var))-0.025)
root<-uniroot(target-0.99,c(0,1))$root
#mixture_CDF_left<-Vectorize(function(t) wts%*%pnorm(t,mean=mean,sd=sqrt(var))-0.025)
root<-uniroot(Vectorize(target),c(0,1))$root
#mixture_CDF_left<-Vectorize(function(t) wts%*%pnorm(t,mean=mean,sd=sqrt(var))-0.025)
root<-uniroot(target,c(0,1))$root
c= sqrt(2/pi)
#r=6e-3
rprob<-function(t){
pnorm(sqrt((1-r)/r*t)) * exp(-t^2/2)
}
target<-function(r){
t<-round(integrate(rprob, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,4)
res=(c*t)^2+(1-c*t)^2
return(res-0.99)
}
#mixture_CDF_left<-Vectorize(function(t) wts%*%pnorm(t,mean=mean,sd=sqrt(var))-0.025)
root<-uniroot(target,c(0,1))$root
#mixture_CDF_left<-Vectorize(function(t) wts%*%pnorm(t,mean=mean,sd=sqrt(var))-0.025)
root<-uniroot(target,c(-1,1))$root
c= sqrt(2/pi)
#r=6e-3
rprob<-function(t){
pnorm(sqrt((1-r)/r*t)) * exp(-t^2/2)
}
target<-function(r){
t<-round(integrate(rprob, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,4)
res=(c*t)^2+(1-c*t)^2
return(res-0.999)
}
#mixture_CDF_left<-Vectorize(function(t) wts%*%pnorm(t,mean=mean,sd=sqrt(var))-0.025)
root<-uniroot(target,c(-1,1))$root
c= sqrt(2/pi)
#r=6e-3
rprob<-function(t){
pnorm(sqrt((1-r)/r)*t) * exp(-t^2/2)
}
target<-function(r){
t<-round(integrate(rprob, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,4)
res=(c*t)^2+(1-c*t)^2
return(res-0.999)
}
#mixture_CDF_left<-Vectorize(function(t) wts%*%pnorm(t,mean=mean,sd=sqrt(var))-0.025)
root<-uniroot(target,c(-1,1))$root
t<-round(integrate(rprob, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,4)
t
res=(c*t)^2+(1-c*t)^2
res
target<-function(r){
t<-round(integrate(function(t){pnorm(sqrt((1-r)/r)*t) * exp(-t^2/2)}, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,4)
res=(c*t)^2+(1-c*t)^2
return(res-0.999)
}
target(6e-3)
target<-function(r){
t<-round(integrate(function(t){pnorm(sqrt((1-r)/r)*t) * exp(-t^2/2)}, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,4)
res=(c*t)^2+(1-c*t)^2
return(res)
}
target(6e-3)
target(1e-5)
target(0)
target(0.024)
#mixture_CDF_left<-Vectorize(function(t) wts%*%pnorm(t,mean=mean,sd=sqrt(var))-0.025)
root<-uniroot(target,c(0,0.1))$root
target<-function(r){
c= sqrt(2/pi)
t<-round(integrate(function(t){pnorm(sqrt((1-r)/r)*t) * exp(-t^2/2)}, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,4)
res=(c*t)^2+(1-c*t)^2
return(res-0.99)
}
#mixture_CDF_left<-Vectorize(function(t) wts%*%pnorm(t,mean=mean,sd=sqrt(var))-0.025)
root<-uniroot(target,c(0,0.1))$root
root
target<-function(r){
c= sqrt(2/pi)
t<-round(integrate(function(t){pnorm(sqrt((1-r)/r)*t) * exp(-t^2/2)}, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,4)
res=(c*t)^2+(1-c*t)^2
return(res-0.9999)
}
#mixture_CDF_left<-Vectorize(function(t) wts%*%pnorm(t,mean=mean,sd=sqrt(var))-0.025)
root<-uniroot(target,c(0,0.1))$root
root
target<-function(r){
c= sqrt(2/pi)
t<-round(integrate(function(t){pnorm(sqrt((1-r)/r)*t) * exp(-t^2/2)}, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,4)
res=(c*t)^2+(1-c*t)^2
return(res-0.997)
}
#mixture_CDF_left<-Vectorize(function(t) wts%*%pnorm(t,mean=mean,sd=sqrt(var))-0.025)
root<-uniroot(target,c(0,0.1))$root
root
target<-function(r){
c= sqrt(2/pi)
t<-round(integrate(function(t){pnorm(sqrt((1-r)/r)*t) * exp(-t^2/2)}, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,4)
res=(c*t)^2+(1-c*t)^2
return(res-0.995)
}
#mixture_CDF_left<-Vectorize(function(t) wts%*%pnorm(t,mean=mean,sd=sqrt(var))-0.025)
root<-uniroot(target,c(0,0.1))$root
root
target<-function(r){
c= sqrt(2/pi)
t<-round(integrate(function(t){pnorm(sqrt((1-r)/r)*t) * exp(-t^2/2)}, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,4)
res=(c*t)^2+(1-c*t)^2
return(res-0.975)
}
#mixture_CDF_left<-Vectorize(function(t) wts%*%pnorm(t,mean=mean,sd=sqrt(var))-0.025)
root<-uniroot(target,c(0,0.1))$root
root
target<-function(r){
c= sqrt(2/pi)
t<-round(integrate(function(t){pnorm(sqrt((1-r)/r)*t) * exp(-t^2/2)}, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,4)
res=(c*t)^2+(1-c*t)^2
return(res-0.95)
}
#mixture_CDF_left<-Vectorize(function(t) wts%*%pnorm(t,mean=mean,sd=sqrt(var))-0.025)
root<-uniroot(target,c(0,0.1))$root
root
target<-function(r){
c= sqrt(2/pi)
t<-round(integrate(function(t){pnorm(sqrt((1-r)/r)*t) * exp(-t^2/2)}, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,4)
res=(c*t)^2+(1-c*t)^2
return(res-0.9)
}
#mixture_CDF_left<-Vectorize(function(t) wts%*%pnorm(t,mean=mean,sd=sqrt(var))-0.025)
root<-uniroot(target,c(0,0.1))$root
root
prob_to_r<-function(x){
target<-function(r){
c<- sqrt(2/pi)
t<-round(integrate(function(t){pnorm(sqrt((1-r)/r)*t) * exp(-t^2/2)}, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,4)
res=(c*t)^2+(1-c*t)^2
return(res-x)
}
#mixture_CDF_left<-Vectorize(function(t) wts%*%pnorm(t,mean=mean,sd=sqrt(var))-0.025)
root<-uniroot(target,c(0,0.1))$root
}
prob=c(0.99,0.975,0.95,0.90)
sappply(prob, function(x) prob_to_r(x))
sapply(prob, function(x) prob_to_r(x))
?uniroot
prob_to_r<-function(x){
target<-function(r){
c<- sqrt(2/pi)
t<-round(integrate(function(t){
pnorm(sqrt((1-r)/r)*t) * exp(-t^2/2)
}, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,4)
res=(c*t)^2+(1-c*t)^2
return(res-x)
}
#mixture_CDF_left<-Vectorize(function(t) wts%*%pnorm(t,mean=mean,sd=sqrt(var))-0.025)
root<-uniroot(target,c(0,0.1),tol = .Machine$double.eps^0.01)$root
}
prob=c(0.99,0.975,0.95,0.90)
sapply(prob, function(x) prob_to_r(x))
prob_to_r<-function(x){
target<-function(r){
c<- sqrt(2/pi)
t<-round(integrate(function(t){
pnorm(sqrt((1-r)/r)*t) * exp(-t^2/2)
}, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,4)
res=(c*t)^2+(1-c*t)^2
return(res-x)
}
#mixture_CDF_left<-Vectorize(function(t) wts%*%pnorm(t,mean=mean,sd=sqrt(var))-0.025)
root<-uniroot(target,c(0,0.1),tol = .Machine$double.eps^0.1)$root
}
prob=c(0.99,0.975,0.95,0.90)
sapply(prob, function(x) prob_to_r(x))
prob_to_r<-function(x){
target<-function(r){
c<- sqrt(2/pi)
t<-round(integrate(function(t){
pnorm(sqrt((1-r)/r)*t) * exp(-t^2/2)
}, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,4)
res=(c*t)^2+(1-c*t)^2
return(res-x)
}
#mixture_CDF_left<-Vectorize(function(t) wts%*%pnorm(t,mean=mean,sd=sqrt(var))-0.025)
root<-uniroot(target,c(0,0.1),tol = .Machine$double.eps^0.2)$root
}
prob=c(0.99,0.975,0.95,0.90)
sapply(prob, function(x) prob_to_r(x))
x=runif(100)
y=runif(100)
1/2*(x+y)
plot(1/2*(x+y))
hist(1/2*(x+y))
hist(x)
hist(y)
y=runif(1000)
hist(y)
x-runif(1000)
x=runif(1000)
hist(x)
hist(1/2*(x+y))
prob_to_r<-function(x){
target<-function(r){
c<- sqrt(2/pi)
t<-round(integrate(function(t){
pnorm(sqrt((1-r)/r)*t) * exp(-t^2/2)
}, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,4)
res=(c*t)^2+(1-c*t)^2
return(res-x)
}
#mixture_CDF_left<-Vectorize(function(t) wts%*%pnorm(t,mean=mean,sd=sqrt(var))-0.025)
root<-uniroot(target,c(0,0.1),tol = .Machine$double.eps^0.2)$root
}
prob=c(0.999,0.975,0.95,0.90)
sapply(prob, function(x) prob_to_r(x))
prob_to_r(0.96)
prob_to_r<-function(x){
target<-function(r){
c<- sqrt(2/pi)
t<-round(integrate(function(t){
pnorm(sqrt((1-r)/r)*t) * exp(-t^2/2)
}, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,4)
res=(c*t)^2+(1-c*t)^2
return(res-x)
}
#mixture_CDF_left<-Vectorize(function(t) wts%*%pnorm(t,mean=mean,sd=sqrt(var))-0.025)
root<-uniroot(target,c(0,0.1),tol = .Machine$double.eps^0.2)$root
return(root)
}
prob_to_r(0.96)
prob_to_r(0.96)^2
prob_to_r(0.95)
6e-3
prob_to_r(0.975)
prob_to_r<-function(x){
target<-function(r){
c<- sqrt(2/pi)
t<-round(integrate(function(t){
pnorm(sqrt((1-r)/r)*t) * exp(-t^2/2)
}, 0, Inf,abs.tol = .Machine$double.eps^0.1)$value,4)
res=c*t
return(res-x)
}
#mixture_CDF_left<-Vectorize(function(t) wts%*%pnorm(t,mean=mean,sd=sqrt(var))-0.025)
root<-uniroot(target,c(0,0.1),tol = .Machine$double.eps^0.2)$root
return(root)
}
prob=c(0.999,0.975,0.95,0.90)
sapply(prob, function(x) prob_to_r(x))
prob=c(1,0.999,0.975,0.95)
sapply(prob, function(x) prob_to_r(x))
hist(0.9*x+0.1*y)
z=runif(1000)
hist(0.8*x+0.1*y+0.1*z)
hist(0.5*x+0.2*y+0.3*z)
hist(0.34*x+0.33*y+0.33*z)
hist(0.8*x+0.1*y+0.1*z)
hist(0.1*x*8+0.1*y+0.1*z)
devtools::use_data_raw()
use_data_raw()
devtools:use_data_raw()
library(devtools)
devtools::use_data_raw()
setwd("~/Desktop/rep_new/PRP/data-raw")
cardi_severe<-read.table("cardiovascular_severe.dat",header=T)
View(cardi_severe)
class(cardi_severe[.3])
class(cardi_severe[,3])
setwd("~/Desktop/rep_new/PRP")
devtools::load_all()
devtools::document
devtools::document()
devtools::use_data(cardi_severe)
source()
setwd("~/Desktop/rep_new/PRP/R")
setwd("~/Desktop/rep_new/PRP")
devtools::document()
setwd("~/Desktop/rep_new/PRP/data-raw")
cardi_severe<-read.table("cardiovascular_severe.dat",header=T)
cardi_mortality<-read.table("cardiovascular.dat",header=T)
rpp<-read.table("rpp_73.dat",header = T)
usethis::use_data(cardi_severe,overwrite = T)
usethis::use_data(cardi_mortality,overwrite = T)
usethis::use_data(rpp,overwrite = T)
devtools::document()
devtools::load_all()
data(rpp)
data("cardi_mortality")
data("cardi_severe")
View(cardi_mortality)
View(cardi_severe)
View(rpp)
devtools::document()
devtools::load_all()
prob_to_r(0.95)
prob_to_r(0.90)
prob_to_r(0.975)
prob_to_r(0.999)
prob_to_r(0.99)
